# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–æ–≤–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ 185.23.238.162

## –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

‚úÖ –°–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω  
üîÑ Docker —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è (–≤ –ø—Ä–æ—Ü–µ—Å—Å–µ)  
‚è≥ 3X-UI –æ–∂–∏–¥–∞–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Docker  

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (–∫–æ–≥–¥–∞ Docker –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤)

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Docker

```bash
docker --version
systemctl status docker
```

### –®–∞–≥ 2: –°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏

```bash
mkdir -p /opt/3x-ui/db
mkdir -p /opt/3x-ui/cert
```

### –®–∞–≥ 3: –°–æ–∑–¥–∞—Ç—å docker-compose.yml

```bash
cat > /root/docker-compose.yml << 'EOF'
version: '3.8'

services:
  3x-ui:
    image: ghcr.io/mhsanaei/3x-ui:v2.8.7
    container_name: 3x-ui
    restart: unless-stopped
    network_mode: host
    volumes:
      - /opt/3x-ui/db:/etc/x-ui
      - /opt/3x-ui/cert:/root/cert
    environment:
      - XRAY_VMESS_AEAD_FORCED=false
    tty: true
EOF
```

### –®–∞–≥ 4: –ó–∞–ø—É—Å—Ç–∏—Ç—å 3X-UI

```bash
cd /root
docker compose up -d
```

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å

```bash
docker ps
docker logs 3x-ui
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Reality VPN

### –®–∞–≥ 1: –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á–∏

```bash
docker exec 3x-ui /app/bin/xray-linux-amd64 x25519
```

–°–æ—Ö—Ä–∞–Ω–∏:
- **PrivateKey** - –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á
- **Password** - –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á

### –®–∞–≥ 2: –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å Short IDs

```bash
openssl rand -hex 8  # Short ID 1
openssl rand -hex 3  # Short ID 2
```

### –®–∞–≥ 3: –û—Ç–∫—Ä—ã—Ç—å –ø–∞–Ω–µ–ª—å 3X-UI

URL: http://185.23.238.162:2053  
–õ–æ–≥–∏–Ω: **admin**  
–ü–∞—Ä–æ–ª—å: **admin**

‚ö†Ô∏è **–°—Ä–∞–∑—É —Å–º–µ–Ω–∏ –ø–∞—Ä–æ–ª—å!**

### –®–∞–≥ 4: –°–æ–∑–¥–∞—Ç—å Inbound

1. –ü–µ—Ä–µ–π–¥–∏ –≤ **Inbounds** ‚Üí **Add Inbound**
2. –ó–∞–ø–æ–ª–Ω–∏:

**–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
- Remark: `Reality-VPN`
- Protocol: `VLESS`
- Listen IP: –æ—Å—Ç–∞–≤—å –ø—É—Å—Ç—ã–º
- Port: `443`

**Network Settings:**
- Network: `TCP`
- Security: `Reality`

**Reality Settings:**
- Dest (SNI): `google.com:443`
- Server Names: `google.com`
- Private Key: *–≤—Å—Ç–∞–≤—å —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π PrivateKey*
- Public Key: *–≤—Å—Ç–∞–≤—å —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π Password*
- Short IDs: *–≤—Å—Ç–∞–≤—å –æ–±–∞ Short ID —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é*
- Fingerprint: `chrome`
- Spider X: `/`

**Flow Control:**
- Flow: `xtls-rprx-vision`

3. –ù–∞–∂–º–∏ **Create**

### –®–∞–≥ 5: –î–æ–±–∞–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞

1. –í —Å–æ–∑–¥–∞–Ω–Ω–æ–º inbound –Ω–∞–∂–º–∏ –Ω–∞ –∏–∫–æ–Ω–∫—É –∫–ª–∏–µ–Ω—Ç–æ–≤
2. **Add Client**
3. –ó–∞–ø–æ–ª–Ω–∏:
   - Email: –∏–º—è –∫–ª–∏–µ–Ω—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `test-user`)
   - UUID: —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
   - Flow: `xtls-rprx-vision`
4. **Add**

### –®–∞–≥ 6: –ü–æ–ª—É—á–∏—Ç—å VLESS —Å—Å—ã–ª–∫—É

1. –ù–∞–∂–º–∏ –Ω–∞ QR-–∫–æ–¥ —Ä—è–¥–æ–º —Å –∫–ª–∏–µ–Ω—Ç–æ–º
2. –°–∫–æ–ø–∏—Ä—É–π VLESS —Å—Å—ã–ª–∫—É
3. –û—Ç–ø—Ä–∞–≤—å –∫–ª–∏–µ–Ω—Ç—É

## –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ .env —Ñ–∞–π–ª–∞

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–±–Ω–æ–≤–∏ `.env` –≤ –ø—Ä–æ–µ–∫—Ç–µ:

```bash
# 3X-UI Panel
XUI_API_URL=http://185.23.238.162:2053
XUI_HOST=185.23.238.162
XUI_USERNAME=admin
XUI_PASSWORD=<–Ω–æ–≤—ã–π_–ø–∞—Ä–æ–ª—å>
INBOUND_ID=<id_—Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ_inbound>

# Reality Settings
REALITY_PUBLIC_KEY=<—Ç–≤–æ–π_–ø—É–±–ª–∏—á–Ω—ã–π_–∫–ª—é—á>
REALITY_SNI=google.com
REALITY_SHORT_ID=<—Ç–≤–æ–π_short_id_1>
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –ü–æ–¥–∫–ª—é—á–∏—Å—å –∫ VPN —á–µ—Ä–µ–∑ Throne —Å –ø–æ–ª—É—á–µ–Ω–Ω–æ–π VLESS —Å—Å—ã–ª–∫–æ–π
2. –ü—Ä–æ–≤–µ—Ä—å –¥–æ—Å—Ç—É–ø –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É
3. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –Ω–µ—Ç –æ—à–∏–±–æ–∫ "reality verification failed"

## –ú–∏–≥—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

1. –°–æ–∑–¥–∞–π –∫–ª–∏–µ–Ω—Ç–æ–≤ –¥–ª—è –≤—Å–µ—Ö —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
2. –û–±–Ω–æ–≤–∏ –∫–æ–Ω—Ñ–∏–≥–∏ –≤ –±–æ—Ç–µ
3. –†–∞–∑–æ—à–ª–∏ –Ω–æ–≤—ã–µ VLESS —Å—Å—ã–ª–∫–∏ —á–µ—Ä–µ–∑ –±–æ—Ç–∞
4. –í—ã–∫–ª—é—á–∏ —Å—Ç–∞—Ä—ã–π —Å–µ—Ä–≤–µ—Ä

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –õ–æ–≥–∏ 3X-UI
docker logs -f 3x-ui

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
docker restart 3x-ui

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker stop 3x-ui

# –ó–∞–ø—É—Å–∫
docker start 3x-ui

# –ë—ç–∫–∞–ø –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
cp -r /opt/3x-ui/db /root/3x-ui-backup-$(date +%Y%m%d)
```

## Troubleshooting

### Docker –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
systemctl start docker
systemctl enable docker
```

### 3X-UI –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω

```bash
# –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—â–µ–Ω
docker ps

# –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏
docker logs 3x-ui

# –ü—Ä–æ–≤–µ—Ä—å –ø–æ—Ä—Ç
netstat -tulpn | grep 2053
```

### Reality verification failed

- –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –∫–ª—é—á–∏ –≤–∞–ª–∏–¥–Ω—ã:
  ```bash
  docker exec 3x-ui /app/bin/xray-linux-amd64 x25519 -i <private_key>
  ```
- –£–±–µ–¥–∏—Å—å —á—Ç–æ –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –≤ –∫–ª–∏–µ–Ω—Ç–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Ç–µ–º, —á—Ç–æ –≤—ã–¥–∞–ª xray
- –ü—Ä–æ–≤–µ—Ä—å SNI (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `google.com`)
- –ü—Ä–æ–≤–µ—Ä—å Short ID

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –î–æ–∂–¥–∞—Ç—å—Å—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Docker
2. ‚è≥ –ó–∞–ø—É—Å—Ç–∏—Ç—å 3X-UI
3. ‚è≥ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Reality inbound
4. ‚è≥ –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞
5. ‚è≥ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
6. ‚è≥ –û–±–Ω–æ–≤–∏—Ç—å .env
7. ‚è≥ –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
